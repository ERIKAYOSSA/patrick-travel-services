(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7326],{8935:(e,t,n)=>{"use strict";n(50979),n(3732),n(40137),n(70375),n(2551),n(45588),n(15857),n(82660),n(31754),n(47654),n(42419),n(73648)},10046:(e,t,n)=>{"use strict";n.d(t,{f:()=>g});var r=n(50979),l=n(14034),s=n(67590),a=n.n(s),o=n(2551),i=n(36609);function c(e){if(!e.length)return"";let t=Object.keys(e[0]);return[t.map(u).join(","),...e.map(e=>t.map(t=>u(e[t])).join(","))].join("\r\n")}function u(e){if(null==e)return"";"object"==typeof e&&(e=JSON.stringify(e));let t=String(e);return t.includes('"')||t.includes(",")||t.includes("\r")||t.includes("\n")?'"'.concat(t.replace(/"/g,'""'),'"'):t}function d(e,t){let n=new Blob([e],{type:{csv:"text/csv",json:"application/json",txt:"text/plain",xml:"application/xml",html:"text/html"}[t.format]}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=t.appendDate?function(e){let t=e.split("."),n=new Date().getTime()+"";return t.splice(t.length-1,0,n),t.join(".")}(t.filename):t.filename,l.click(),URL.revokeObjectURL(r)}var m=n(31754),x=n(75749),h=n(17057);function g(e){let{logs:t,toJSON:n=v,toPlainText:s=f,className:u}=e,g="text-neutral focus:text-neutral dark:focus:text-neutral focus:bg-neutral-surface-hover font-medium text-sm rounded";return(0,r.jsxs)(h.ms,{children:[(0,r.jsx)(l.ty,{asChild:!0,children:(0,r.jsx)(m.K0,{icon:o.f5X,color:"gray",size:"xs",variant:"outline",className:(0,i.xW)("p-4 bg-background",u),title:"Options"})}),(0,r.jsxs)(h.pm,{align:"end",className:"min-w-0 w-48 p-1",onCloseAutoFocus:e=>e.preventDefault(),children:[(0,r.jsx)(h.o_,{children:"Download logs as..."}),(0,r.jsx)(h.tJ,{className:g,onSelect:()=>{d(t.map(s).join("\n"),{filename:"logs.log",format:"txt",appendDate:!0})},children:"Plain text"}),(0,r.jsx)(h.tJ,{className:g,onSelect:()=>{d(JSON.stringify(t.map(n)),{filename:"logs.json",format:"json",appendDate:!0})},children:"JSON"}),(0,r.jsx)(h.tJ,{className:g,onSelect:()=>{d(c(t.map(n)),{filename:"logs.csv",format:"csv",appendDate:!0})},children:"CSV"}),(0,r.jsx)(x.c,{}),(0,r.jsx)(h.o_,{children:"Copy logs as..."}),(0,r.jsx)(h.tJ,{className:g,onSelect:()=>{let e=t.map(s).join("\n");a()(e)},children:"Plain text"}),(0,r.jsx)(h.tJ,{className:g,onSelect:()=>{let e=t.map(n);a()(JSON.stringify(e))},children:"JSON"}),(0,r.jsx)(h.tJ,{className:g,onSelect:()=>{let e=c(t.map(n));a()(e)},children:"CSV"})]})]})}let p={debug:"dbg",info:"inf",warn:"wrn",error:"err"};function f(e){var t;if("string"!=typeof e.message)return JSON.stringify(e);let n=e.message||"",r=e.timestamp,l="string"==typeof e.severity?"[".concat(null!=(t=p[e.severity])?t:e.severity.slice(0,3),"] "):"";return"".concat(r," ").concat(l," ").concat(n)}function v(e){if("string"!=typeof e.message)return e;let{message:t,timestamp:n}=e;return{timestamp:n,message:t}}},20889:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ez});var r=n(50979),l=n(25963),s=n(61649),a=n(71121),o=n(2551),i=n(12645),c=n(36609),u=n(67970);n(1142);var d=n(97865),m=n(55850);n(3732);var x=n(6008);n(24224),n(15857),n(15518),n(8935),n(61259);var h=n(31754);n(71144),n(32357),n(44661),n(17057),n(70375),n(95662),n(89633),n(64963);var g=n(81154),p=n(24023),f=n(65431),v=n(25836),j=n(21500),y=n(76999),b=n(97989);let w=(0,l.memo)(function(e){let{attributes:t,name:n,className:l,...s}=e,a=(0,j.R7)(),o=function(e,t){let n=t.split("."),r=e.find(e=>e.key===n[0]);if(r){if(1===n.length)try{return JSON.parse(r.value)}catch(e){return r.value}try{let e=JSON.parse(r.value);return n.slice(1).reduce((e,t)=>{if(e&&"object"==typeof e&&!Array.isArray(e))return e[t]},e)}catch(e){return}}}(t,n);return(0,r.jsx)(b.n,{className:(0,c.xW)("text-neutral-secondary",l),...s,children:(0,r.jsx)(N,{value:o,onFilter:()=>{a.enabled&&null!=o&&"object"!=typeof o&&a.addExpression(new y.nW(n,JSON.stringify(o)))},filtersEnabled:a.enabled})})});function N(e){let{value:t,onFilter:n,filtersEnabled:l}=e;if(void 0===t)return(0,r.jsx)(r.Fragment,{children:"—"});let s=null!==t&&"object"!=typeof t,a="object"==typeof t&&null!==t?JSON.stringify(t):String(t);return s?(0,r.jsx)("button",{className:(0,c.xW)("text-left",l&&"hover:underline cursor-pointer"),onClick:n,children:a}):(0,r.jsx)(r.Fragment,{children:a})}var S=n(40853),k=n(81428),T=n(92727),C=n(10046),E=n(13611),z=n(77146),D=n(29009),R=n(49872),F=n(47829),L=n(23466),O=n(73751),I=n(17851),P=n(41220),U=n(24554),W=n(84044),M=n(22986),_=n.n(M),A=n(66800),J=n.n(A),$=n(86954),K=n(76933),H=n(36725),B=n(94662),q=n(13077),V=n(70643),X=n(55297);function Y(){let{liveUpdates:e,timeFrame:t,startTime:n,endTime:s,startTimeQuery:a,setLiveUpdates:i,setStartTime:c,setEndTime:u,setTimeFrame:d}=Z(),[m,x]=(0,l.useState)(!1),[g,p]=(0,l.useState)(!1),f=e=>(0,X.bp)().searchParams.get(e),v=f("startText"),j=f("endText"),y=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.g,{dateStyle:"short",children:n}),"off"===e&&(0,r.jsxs)(r.Fragment,{children:[" ",s&&(0,r.jsxs)(r.Fragment,{children:["- ",(0,r.jsx)(H.g,{dateStyle:"short",children:s})]})]})]}),b=(0,X.bp)().searchParams.has(V.XR),w=t&&!a&&!s&&!b;w&&(y=({"5m":(0,r.jsx)(r.Fragment,{children:"Last 5 min"}),"15m":(0,r.jsx)(r.Fragment,{children:"Last 15 min"}),"30m":(0,r.jsx)(r.Fragment,{children:"Last 30 min"}),"1h":(0,r.jsx)(r.Fragment,{children:"Last hour"}),"3h":(0,r.jsx)(r.Fragment,{children:"Last 3 hr"}),"6h":(0,r.jsx)(r.Fragment,{children:"Last 6 hr"}),"1d":(0,r.jsx)(r.Fragment,{children:"Last day"}),"7d":(0,r.jsx)(r.Fragment,{children:"Last week"}),"30d":(0,r.jsx)(r.Fragment,{children:"Last month"})})[t]||y);let N=e=>{if(x(!1),!e.trim())return c(null,null);let t=ee(e);t?c(t.getTime(),e.trim()):x(!0)},S=e=>{if(p(!1),!e.trim())return u(null,null);let t=ee(e);t?u(t.getTime(),e.trim()):p(!0)},k={"5m":"5 min","15m":"15 min","30m":"30 min","1h":"1 hour","3h":"3 hour","6h":"6 hour","1d":"1 day","7d":"7 day","30d":"30 day"},T=et.options.map(e=>{let n=w&&t===e;return(0,r.jsx)(h.$n,{size:"xs",variant:n?"primary":"outline",color:"gray",onClick:()=>{d(e),J()(e)>J()("1h")&&i("off")},children:k[e]},e)});return(0,r.jsxs)(P.AM,{children:[(0,r.jsxs)("div",{className:"flex gap-2 h-[34px]",children:[(0,r.jsx)(K.m,{side:"bottom",content:"on"===e?"Pause live updates":"Resume live updates",className:"text-xs font-medium",children:(0,r.jsx)(h.K0,{title:"on"===e?"Pause live updates":"Resume live updates",size:"xs",variant:"outline",color:"on"===e?"green":"gray",className:"p-4 font-mono bg-background",icon:"on"===e?o.vRz:o.jGG,onClick:()=>{i("on"===e?"off":"on")}})}),(0,r.jsx)(P.Wv,{asChild:!0,children:(0,r.jsx)(h.$n,{size:"xs",variant:"outline",color:"gray",className:"p-4 font-mono bg-background grow",icon:o.zD7,children:y})})]}),(0,r.jsxs)(P.hl,{align:"start",sideOffset:4,className:"bg-background border border-neutral shadow-md rounded-lg z-50 w-[348px] max-w-[90vw]",children:[(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-neutral-secondary",children:"Quick range"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-3 font-mono",children:T})]})}),(0,r.jsxs)("div",{className:"px-5 pb-5 flex flex-col gap-y-2",children:[(0,r.jsxs)("label",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-neutral-secondary",children:"From"}),(0,r.jsx)($.pd,{size:"sm",label:{hidden:!0,text:"Start time"},placeholder:"2 hours ago, yesterday 3pm, Dec 25 2023",className:"w-full text-xs",defaultValue:w&&t?t+" ago":v||(a?new Date(n).toLocaleString():""),error:m,onChange:()=>x(!1),onBlur:e=>N(e.target.value),onKeyDown:e=>{"Enter"===e.key&&N(e.currentTarget.value)},suffix:(0,r.jsx)(q.In,{icon:o.VvS,size:"xs"})},"".concat(n,"-").concat(t))]}),(0,r.jsxs)("label",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-[11px] font-medium text-neutral-secondary",children:"Until"}),(0,r.jsx)($.pd,{size:"sm",label:{hidden:!0,text:"End time"},placeholder:"1h ago, 2023-12-25, now",className:"w-full text-xs",defaultValue:j||(s?new Date(s).toLocaleString():""),error:g,onChange:()=>p(!1),onBlur:e=>S(e.target.value),onKeyDown:e=>{"Enter"===e.key&&S(e.currentTarget.value)},suffix:(0,r.jsx)(q.In,{icon:o.VvS,size:"xs"})},"".concat(s,"-").concat(t))]})]})]})]})}function G(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[V.XR];(0,X.bj)(e,{replace:t,deleteKeys:n,customSerializer:(e,t)=>(function(e){let t={};return Object.entries(e).forEach(e=>{let[n,r]=e;null!=r&&(t[n]=String(r))}),t})({[e]:t})[e]||null})}function Q(e){let{backend:t,children:n}=e;return(0,r.jsx)(ep.Provider,{value:t,children:n})}function Z(){let e=(0,l.useContext)(ep),t=(0,g.md)(ei,e),n=(0,g.md)(ex,e),r=(0,g.md)(eh,e);return{timeFrame:t,startTime:n,endTime:r,liveUpdates:(0,g.md)(em,e),startTimeQuery:(0,g.md)(ec,e),setTimeFrame(t){e.setTimeFrame(t)},setStartTime(t,n){e.setStartTime(t,n)},setEndTime(t,n){e.setEndTime(t,n)},setTimeRange(t,n){e.setTimeRange(t,n)},setLiveUpdates(t){e.setLiveUpdates(t)}}}function ee(e){if(!e.trim())return null;let t=e.trim().toLowerCase();if("now"===t||"right now"===t)return new Date;let n=e.replace(/(\d+)\s*m(?!o|i)/gi,"$1 minutes ago").replace(/(\d+)\s*h(?!o)/gi,"$1 hours ago").replace(/(\d+)\s*d(?!a)/gi,"$1 days ago").replace(/(\d+)\s*w(?!e)/gi,"$1 weeks ago");try{let e=B._U(n);if(e&&!isNaN(e.getTime()))return e}catch(e){}try{let e=new Date(n);if(!isNaN(e.getTime()))return e}catch(e){}return null}let et=I.z.enum(["5m","15m","30m","1h","3h","6h","1d","7d","30d"]),en=I.z.preprocess(e=>{if(null==e)return;let t=Array.isArray(e)?e[0]:e;if("string"!=typeof t||""===t)return;let n=parseInt(t,10);return isNaN(n)?void 0:n},I.z.number().nullable().optional()),er=I.z.preprocess(e=>{if(null==e)return;let t=Array.isArray(e)?e[0]:e;if("string"==typeof t&&""!==t)return et.safeParse(t).success?t:void 0},et.nullable().optional()),el=I.z.preprocess(e=>{if(null==e)return;let t=Array.isArray(e)?e[0]:e;if("string"==typeof t&&""!==t)return t},I.z.string().nullable().optional()),es=I.z.object({timeFrame:er,start:en,end:en,startText:el,endText:el});function ea(e){let t=Object.fromEntries(e.searchParams.entries()),n=es.safeParse(t);return n.success?n.data:{}}let eo=(0,W.tG)("@railway/logs/timeFrame","15m",void 0,{getOnInit:!0}),ei=(0,U.eU)(e=>{var t;return null!=(t=e(eg).timeFrame)?t:e(eo)}),ec=(0,U.eU)(e=>e(eg).start),eu=(0,U.eU)(e=>e(eg).end),ed=(0,W.tG)("@railway/logs/liveUpdates","on",(()=>{let e=!1;return{getItem:t=>{let n=localStorage.getItem(t);return"paused"!==n||e?(e=!0,n||"off"):(e=!0,localStorage.setItem(t,"on"),"on")},setItem:(t,n)=>{e=!0,localStorage.setItem(t,n)},removeItem:t=>{e=!0,localStorage.removeItem(t)}}})(),{getOnInit:!0}),em=(0,U.eU)(e=>e(eu)?"off":e(ed),(e,t,n)=>{t(ed,n)}),ex=(0,U.eU)(e=>{let t=e(ec);if(t)return t;let n=Date.now(),r=e(ei);return r?n-J()(r):n-J()("15m")}),eh=(0,U.eU)(e=>{let t=e(eu);return t||(e(em)?null:Date.now())}),eg=(0,U.eU)(ea((0,X.bp)()));eg.onMount=e=>{e(ea((0,X.bp)()));let t=t=>{e(ea(new URL(t,window.location.origin)))},n=t=>{e(ea((0,X.bp)()))};return _().events.on("routeChangeComplete",t),window.addEventListener("popstate",n),()=>{_().events.off("routeChangeComplete",t),window.removeEventListener("popstate",n)}};let ep=(0,l.createContext)({store:(0,U.y$)(),setTimeFrame(){},setStartTime(){},setEndTime(){},setTimeRange(){},setLiveUpdates(){}});var ef=n(90511),ev=n(60904),ej=n(67366);function ey(){let e=(0,a.py)();(0,s.bU)(()=>({value:"log-preferences",text:"Log Preferences",highlighted:!0,icon:o.wB_,subCommands:e}),[e]);let t=(0,g.md)(f.AQ),n=(0,g.md)(i.KE),d=(0,j.T_)(),m=function(){let{replace:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t]=(0,l.useState)(()=>(0,U.y$)());return(0,l.useMemo)(()=>({store:t,setTimeFrame(n){t.set(eo,n),G({timeFrame:n,start:null,end:null,startText:null,endText:null},e)},setStartTime(t,n){G({timeFrame:null,start:t,startText:n},e)},setEndTime(t,n){G({timeFrame:null,end:t,endText:n},e)},setTimeRange(t,n){G({timeFrame:null,start:t,end:n,startText:null,endText:null},e)},setLiveUpdates(n){let r=Date.now();"off"!==n||t.get(ei)?"on"===n&&G({end:null},e):G({end:r},e),t.set(ed,n)}}),[t,e])}();return(0,r.jsx)(r.Fragment,{children:null==n||null==t?(0,r.jsx)("div",{className:(0,c.xW)("h-full grid grid-rows-[1fr] mt-4"),children:(0,r.jsx)(u.m6,{})}):(0,r.jsx)(j.B4,{backend:d,children:(0,r.jsx)(Q,{backend:m,children:(0,r.jsx)(eb,{environmentId:n,projectId:t})})})})}let eb=(0,l.memo)(function(e){let{environmentId:t,projectId:n}=e,s=(0,j.R7)(),a=(0,l.useRef)(null),o=Z(),i=(0,V.JO)(),u=i.context&&"on"!==o.liveUpdates||"off"===o.liveUpdates?"query":"stream",d=(0,ev.EM)({variables:{environmentId:t,filter:s.toString(),...(0,k.m)({timeRange:o,viewInContext:{context:i.context}})},mode:u,streamPaused:"paused"===o.liveUpdates,onStreamPausedChange(e){if(e)o.setLiveUpdates("paused");else{var t;null==(t=a.current)||t.scrollToPosition("bottom")}}}),m=(0,ev.KX)(d),x=(0,L.FW)({id:n,type:"deploy"});(0,V.Do)({logs:d,viewInContext:i,scrollToIndex(e){var t;null==(t=a.current)||t.scrollToIndex(e,{behavior:"auto",align:"center"})}});let h=(0,l.useCallback)(function(e,t){var n;let l=null==(n=d.store.get(ev.uc))?void 0:n.has(e.timestamp);return(0,r.jsx)(eN,{data:e,tableSettings:x,isNew:l,viewInContextStore:i.store})},[x,d.store]),g=(0,l.useCallback)(()=>{let e=new Date().toLocaleTimeString([],{timeZoneName:"short"}).split(" ").pop(),t=[{key:"time",columnKey:"timestamp",defaultWidth:196,children:"Time (".concat(e,")")},...x.railwayColumns.map(e=>({key:e,columnKey:"tags.".concat(e),className:"capitalize",defaultWidth:164,children:e})),...x.dataColumns.map(e=>({key:e,columnKey:"data.".concat(e),defaultWidth:164,children:e})),...x.showRawData?[{key:"data",columnKey:"data",children:"Data"}]:[],{key:"settings",columnKey:"settings",children:(0,r.jsx)(L.QA,{id:n,type:"deploy"}),className:"text-right"}];return t.map((e,n)=>(0,r.jsx)(F.x,{columnKey:e.columnKey,resizable:n<t.length-(x.showRawData?2:1),defaultWidth:e.defaultWidth,className:e.className,style:e.style,children:e.children},e.key))},[x,i.store]),p=(0,j.nU)(d.data),f=(0,l.useMemo)(()=>({Row:(0,T.C)({toJSON:ev.H_})}),[]);return(0,l.useEffect)(()=>{if("on"===o.liveUpdates&&"connected"!==d.status&&"connecting"!==d.status){var e;null==(e=a.current)||e.scrollToPosition("bottom")}},[o.liveUpdates,d.status]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-rows-[max-content,minmax(0,1fr)] w-full",children:(0,r.jsxs)("div",{className:"bg-secondaryBg w-full border-b border-b-neutral flex flex-col gap-y-3.5 max-w-[100vw]",children:[(0,r.jsxs)("div",{className:(0,c.xW)("pt-2 px-4 sm:px-6 grid sm:items-stretch grid-rows-2 items-center grid-cols-[minmax(0,1fr),max-content] sm:grid-rows-1 sm:grid-cols-[max-content,minmax(0,1fr),max-content] gap-2",!x.showHistogram&&"pb-2"),children:[(0,r.jsx)(Y,{}),(0,r.jsx)(C.f,{logs:d.data,className:"flex sm:hidden",toJSON:ev.H_}),(0,r.jsx)(j.ZY,{customFields:p,railwayTags:["deployment","replica"],className:"col-span-2 sm:col-span-1"}),(0,r.jsx)(C.f,{logs:d.data,className:"hidden sm:flex",toJSON:ev.H_})]}),x.showHistogram&&(0,r.jsx)("div",{className:"w-full h-14 px-4 sm:px-6",children:(0,r.jsx)(ew,{environmentId:t,filters:s,timeRange:o,virtualTable:a})})]})}),(0,r.jsxs)("div",{className:(0,c.xW)("w-full h-full pb-1.5 relative max-w-[100vw] ansi-color-wrapper transition-opacity duration-300",(d.isLoading||d.isFetching)&&"opacity-50"),children:[d.isLoading&&!d.data.length?(0,r.jsx)(v.C,{}):d.isLoading||d.data.length?(0,r.jsx)(S.t,{logs:d.data,viewInContext:i,toJSON:ev.H_,children:(0,r.jsx)(ej.M,{ref:a,data:d.data,components:f,renderRow:h,renderHeader:g,initialPosition:i.context?"top":"bottom",onScrollStateChange:e=>{"off"!==o.liveUpdates&&("bottom"!==e.position&&"both"!==e.position?o.setLiveUpdates("paused"):"on"!==o.liveUpdates&&o.setLiveUpdates("on"))},renderTopBookend:e=>(0,r.jsx)(z.w,{position:"top",timeRange:o,pagination:m,...e}),renderBottomBookend:e=>(0,r.jsx)(z.w,{position:"bottom",timeRange:o,pagination:m,...e})})}):(0,r.jsx)(v.C,{title:s.expression?"No logs found for this filter":"No logs in this time range",subtitle:"Logs will show up here as they are found."}),(0,r.jsx)(R.Y,{isPaused:"timedOut"===d.status,onResume:()=>{o.setLiveUpdates("on"),d.reconnectStream()}})]})]})});function ew(e){let{filters:t,timeRange:n,environmentId:l,virtualTable:s}=e,a=function(e){let{environmentId:t,filter:n,timeRange:r}=e,l=(0,x.l)(500).width,{graphqlClient:s}=(0,m.q)(),{result:a}=(0,d.W)(["histogram",t,n,r.startTime,r.endTime,l],async()=>(await s.logsHistogram({filter:n,environmentId:t,startDate:new Date(r.startTime).toISOString(),endDate:r.endTime?new Date(r.endTime).toISOString():null,maxBuckets:Math.round(window.outerWidth/20)})).logsHistogram,{refetchInterval:3e4,refetchOnWindowFocus:!1,placeholderData:p.rX});return a.data?a.data:null}({filter:t.toString(),environmentId:l,timeRange:n});return a?(0,r.jsx)(E.dq,{data:a,onSelectTimeRange:(e,t)=>{var r;null==(r=s.current)||r.scrollToPosition("bottom"),n.setTimeRange(e,t)}}):(0,r.jsx)(E.oG,{})}let eN=(0,l.memo)(function(e){let{data:t,tableSettings:n,isNew:l,viewInContextStore:s}=e,a=(0,V.JO)(s),o=a.isInContext(t.timestamp);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ef.x,{severity:t.severity,showSeverity:n.showSeverity,isNew:l,className:(0,c.xW)("select-none hover:underline cursor-pointer",o&&"relative before:absolute before:inset-0 before:border-l-3 before:border-l-pink-400 bg-gradient-to-r from-pink-100 via-transparent to-transparent"),...a.getPropsForTimestamp(t.timestamp),children:t.timestamp}),n.railwayColumns.map(e=>(0,r.jsx)(O.zX,{tags:t.tags,name:e,severity:t.severity,isNew:l,className:"select-none"},e)),n.dataColumns.map(e=>(0,r.jsx)(w,{attributes:t.attributes,name:e,severity:t.severity,isNew:l,className:"select-none"},e)),n.showRawData&&(0,r.jsx)(D.n,{data:t,severity:t.severity,wrapText:n.wrapText,showPlainText:n.showPlainText,isNew:l,dataColumns:n.dataColumns,showAttributes:n.showDataAttributes,toJSON:eS}),!n.showRawData&&(0,r.jsx)(b.n,{severity:t.severity,isNew:l})]})}),eS=e=>(0,ev.H_)(e,{message:!0,timestamp:!0,attributes:!0,tags:!1});function ek(){return(0,r.jsx)(ey,{})}var eT=n(7776),eC=n(99850);let eE=()=>(0,r.jsx)(ek,{}),ez=eE;eE.getLayout=e=>{let{children:t}=e,n=(0,l.useRef)(null);return(0,r.jsx)(eT.YS,{globalBannerSlotRef:n,seo:{title:"Log Explorer"},children:(0,r.jsxs)("div",{className:"min-h-screen grid grid-rows-[auto_auto_minmax(0,1fr)]",children:[(0,r.jsx)("div",{ref:n}),(0,r.jsx)(eC.g,{}),(0,r.jsx)("main",{className:"h-full grid grid-rows-[auto_minmax(0px,1fr)]",children:t})]})})}},25646:(e,t,n)=>{"use strict";n.d(t,{j:()=>s});var r=n(50979),l=n(28443);let s=e=>{let{triggerContent:t,cardContent:n}=e;return(0,r.jsxs)(l.bL,{children:[(0,r.jsx)(l.l9,{children:t}),(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{className:"z-40 relative shadow-lg bg-secondaryBg p-4 rounded-lg text-foreground font-sans",children:[n,(0,r.jsx)(l.i3,{})]})})]})}},32357:(e,t,n)=>{"use strict";n.d(t,{j:()=>j});var r=n(50979),l=n(25963),s=n(19391),a=n(37111),o=n(40974),i=n.n(o),c=n(63344),u=n(31754),d=n(2551),m=n(8718),x=n(13077),h=n(95662),g=n(13025),p=n(42419),f=n(6008),v=n(36609);let j=l.forwardRef((e,t)=>{let{value:n,defaultOpen:o,options:i,onChange:p,onSelect:j,icon:b,iconText:w,overflowHint:k,behavior:T="insert",minQueryLength:C=1,className:E,portalContainer:z,iconContainerClassName:D,includeFullMatch:R,...F}=e,L=(0,l.useRef)(null),[O,I]=(0,l.useState)(null),P=(0,l.useMemo)(()=>{let e=[];for(let t of i){let r=0,l=0;for(;(l=n.indexOf(t.value,r))>-1;)e.push({start:l,end:l+t.value.length}),r=l+t.value.length}return e},[n]);(0,l.useImperativeHandle)(t,()=>O);let[U,W]=(0,l.useState)(!1),[M,_]=(0,l.useState)(!1),[A,J]=(0,l.useState)(null),[$,K]=(0,l.useState)(0),[H,B]=(0,l.useState)(0),[q,V]=(0,l.useState)(null!=n?n:"");(0,l.useEffect)(()=>{o&&W(!0)},[]),(0,l.useEffect)(()=>{W(U||o||!1)},[o]);let{prefix:X,suffix:Y,matchedOptions:G,selectableOptions:Q}=(0,l.useMemo)(()=>{let e=q.slice(0,null!=$?$:0),t=q.slice(null!=H?H:0,q.length),{results:n,hasValidQuery:r}=N({options:i,prefix:e,suffix:t,minQueryLength:U?1:C,includeFullMatch:R}),l=r?n:i.filter(e=>{var t;return(null!=(t=e.numMatchStart)?t:0)<=1}).map(e=>({obj:e,query:"",score:0,target:e.value}));return{prefix:e,suffix:t,matchedOptions:n,selectableOptions:l}},[q,$,H,U,JSON.stringify(i)]);(0,l.useEffect)(()=>{if(null!=O)return(0,m.Ay)(O,{Enter:e=>{if(0===Q.length)return void W(!1);!U||e.shiftKey||e.ctrlKey||e.metaKey||e.altKey||(e.preventDefault(),e.stopPropagation(),null!==A&&A<Q.length&&ee(Q[A]))},ArrowUp:e=>{var t,n;if(!U)return;e.preventDefault(),J(e=>null===e?0:e-1);let r=(null!=(n=null==(t=L.current)?void 0:t.querySelectorAll("."+y.className))?n:[])[(null!=A?A:-1)-1];null==r||r.scrollIntoView({block:"nearest"})},ArrowDown:e=>{var t,n;if(!U)return;e.preventDefault(),J(e=>null===e?0:e+1);let r=(null!=(n=null==(t=L.current)?void 0:t.querySelectorAll("."+y.className))?n:[])[(null!=A?A:-1)+1];null==r||r.scrollIntoView({block:"nearest"})},Escape:e=>{U&&(e.stopPropagation(),en())},"Control+Space":e=>{U||(e.preventDefault(),et())}})},[O,U,A,Q]),(0,l.useEffect)(()=>{0!==Q.length&&null!=A&&(A<0?J(0):A>Q.length-1&&J(Q.length-1))},[A,Q]),(0,l.useEffect)(()=>{!U&&G.length>0&&et()},[G.length,Q.length]),(0,l.useEffect)(()=>{let e=()=>W(!1);return document.addEventListener("scroll",e),()=>document.removeEventListener("scroll",e)},[]);let Z=e=>{0===e.length&&q.length>0&&en(),V(e),p(e)},ee=e=>{var t;let n=null!=(t=e.query.length)?t:0,r=X.slice(0,X.length-n)+e.target,l="replace"===T?e.target:r+Y;null!=O&&(O.value=l,O.setSelectionRange(r.length,r.length,"forward"),K(O.selectionStart),B(O.selectionEnd),O.focus()),Z(l),en(),null==j||j(e.obj)},et=()=>{U||(J(0),W(!0),null==O||O.focus())},en=()=>{U&&(W(!1),_(!1))},[er,el]=(0,l.useState)(),es=(0,f.l)(100),{positionStyles:ea,numToShow:eo}=(0,l.useMemo)(()=>{let e=null==O?void 0:O.getBoundingClientRect();if(null==e)return{numToShow:1/0};let t=Math.min(600,window.innerHeight-e.bottom-30),n=Math.floor(t/37-1);return k&&(n-=1),(M||n<3)&&(n=1/0),{numToShow:n,positionStyles:{top:"".concat(e.bottom,"px"),left:"".concat(e.left,"px"),minWidth:"".concat(e.width,"px"),maxHeight:"".concat(t,"px")}}},[O,U,M,es]);return(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)(c.T,{name:F.name,ref:I,highlights:P,enterToSubmit:!0,autoComplete:"off",spellCheck:!1,...F,value:n,onChange:e=>Z(e.currentTarget.value),onBlur:()=>{null!=er&&clearTimeout(er),el(setTimeout(en,400))},onFocus:()=>{null!=er&&clearTimeout(er)},onSelect:e=>{K(e.currentTarget.selectionStart),B(e.currentTarget.selectionEnd)},className:(0,v.xW)("resize-none max-h-[30vh] !pr-7",E),textareaSiblings:(0,r.jsx)(r.Fragment,{children:b&&(0,r.jsx)(u.$n,{"aria-hidden":!0,tabIndex:-1,variant:"primary",title:"Open",size:"md"===F.size?"sm":"xs",type:"button",color:"gray",onClick:et,className:(0,v.xW)("z-10 absolute right-0 top-0 mt-1 mr-1 !bg-gray-100 border-0 text-gray-600 hover:text-gray-900",D),children:(0,r.jsxs)(h.z,{align:"center",children:[(0,r.jsx)(x.In,{icon:b,size:"xs",className:"!h-[14px] !w-[14px]"}),(0,r.jsx)(g.P.div,{animate:!n&&w?{marginLeft:"0.2rem"}:{marginLeft:0,opacity:0,width:0},className:"overflow-hidden whitespace-nowrap",children:w})]})})})}),U&&(0,r.jsxs)(s.b,{"aria-hidden":!0,container:z,children:[(0,r.jsx)("div",{onClick:en,className:"fixed top-0 left-0 right-0 bottom-0 z-50"}),(0,r.jsx)("div",{ref:L,style:ea,className:"fixed z-50 bg-background shadow-md dark:bg-gray-100 rounded border border-gray-200 mt-0.5 flex",children:(0,r.jsxs)(a.F,{thumbCSS:"brightness-95 dark:brightness-125",className:"h-auto w-full p-2",onScroll:e=>e.stopPropagation(),children:[0===Q.length&&(0,r.jsx)(S,{className:"text-gray-500 italic py-0",children:"No suggestions"}),k&&Q.length>eo&&(0,r.jsxs)(S,{className:"text-gray-500",children:[(0,r.jsx)(x.In,{icon:d.R2D,size:"sm",className:"mr-2"}),(0,r.jsx)("span",{className:"text-xs",children:k})]}),Q.slice(0,M?-1:eo).map(e=>(0,r.jsx)(y,{hint:e.obj.hint,isFocused:null!==A&&Q[A]===e,onClick:()=>{ee(e)},onHover:()=>J(Q.indexOf(e)),onBlur:()=>J(null),textBeforeCursor:X,result:e},e.obj.value+e.obj.hint)),Q.length>eo&&(0,r.jsxs)(S,{hoverStyles:!0,onClick:e=>{e.stopPropagation(),e.preventDefault(),_(!0),null==O||O.focus()},className:"text-gray-500",children:[(0,r.jsx)(x.In,{icon:d.a4,size:"sm",className:"mr-2"}),(0,r.jsxs)("span",{className:"text-sm",children:["Show ",Q.length-eo," More"]})]})]})})]})]})}),y=e=>{let{isFocused:t,onClick:n,onHover:l,onBlur:s,result:a,hint:o,textBeforeCursor:c,...u}=e;return(0,r.jsxs)(S,{hasFocus:t,className:y.className,onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},onMouseEnter:l,onMouseLeave:s,...u,children:[a.obj.icon&&(0,r.jsx)(x.In,{icon:a.obj.icon,size:"sm",className:"mr-2 text-gray-500"}),(0,r.jsx)("div",{className:"font-mono text-gray-600",children:null!=a._indexes?i().highlight(a,(e,t)=>(0,r.jsx)("span",{className:"underline",children:e},t)):a.target}),null!=o&&(0,r.jsx)(p.ax,{className:"pl-8 ml-auto text-gray-500",children:o})]})};y.className="autocomplete-item";let b=(e,t,n)=>{let r="";for(let l=0;l<e.length;l++){let s=e.length-1-l,a=e[s];if(n&&e.slice(s,s+n.length)===n)break;if(r=a+r,t&&e.slice(s,s+t.length)===t)return r}return""},w=(e,t,n)=>{for(let r=0;r<e.length;r++)if(n&&e.slice(r-n.length,r)===n||t&&e.slice(r-t.length,r)===t)return!1;return!0},N=e=>{let{options:t,prefix:n,suffix:r,minQueryLength:l,includeFullMatch:s=!1}=e,a=[],o=!1;for(let e of t){var c,u;let t=e.value.slice(0,null!=(c=e.numMatchStart)?c:1),d=e.value.slice(-(null!=(u=e.numMatchStop)?u:0));if(!w(r,t,d))continue;let m=""===t?n:b(n,t,d);if(m.length<l||!s&&e.value.length===m.length)continue;o=!0;let x=i().single(m,e.value);null!==x&&a.push({...x,obj:e,query:m})}return{results:a,hasValidQuery:o}},S=(0,v.Wp)("div")(e=>["w-full px-2 py-2 text-sm rounded-md flex items-center cursor-default",e.hasFocus&&"bg-gray-100 dark:bg-gray-200",e.hoverStyles&&"hover:bg-gray-100 dark:hover:bg-gray-200"])},40137:(e,t,n)=>{"use strict";n(25963)},44661:(e,t,n)=>{"use strict";n.d(t,{S:()=>d});var r=n(50979),l=n(687),s=n(25963),a=n(71144),o=n(2551),i=n(13077),c=n(36609),u=n(76933);function d(e){let{disabled:t=!1,id:n,label:d,onChange:m,checked:x=!1,size:h="md",value:g,tooltip:p}=e,{track:f}=(0,a.j)(),v=(0,s.useCallback)(e=>{m&&(f({action:"Toggle",object:"checkbox",properties:{isChecked:e,id:n}}),m(!!e))},[m]),j=(0,c.xW)(["rounded","border","inline-flex items-center justify-center cursor-pointer","focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-400","rdx-state-checked:bg-pink-500 border-pink-500","rdx-state-unchecked:border-gray-300","rdx-disabled:opacity-50","xs"===h&&"h-4 w-4","sm"===h&&"h-5 w-5","md"===h&&"h-6 w-6"]),y=(0,c.xW)(["text-white","xs"===h&&"h-3 w-3","sm"===h&&"h-4 w-4 p-0.5","md"===h&&"h-5 w-5 p-0.5"]),b=(0,c.xW)(["pl-3 select-none text-base cursor-pointer",t&&"opacity-50","xs"===h&&"text-xs","sm"===h&&"text-sm","md"===h&&"text-base",p&&"border-b border-dashed border-gray-300"]);return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(l.bL,{"aria-labelledby":"".concat(n,"-label"),checked:x,className:j,disabled:t,id:n,value:g,onCheckedChange:v,children:(0,r.jsx)(l.C1,{children:(0,r.jsx)(i.In,{className:y,icon:o.Jlk,size:h})})}),d&&(0,r.jsx)(r.Fragment,{children:p?(0,r.jsx)(u.m,{side:"top",content:(0,r.jsx)(r.Fragment,{children:p}),children:(0,r.jsx)("label",{className:b,htmlFor:n,id:"".concat(n,"-label"),children:d})}):(0,r.jsx)("label",{className:b,htmlFor:n,id:"".concat(n,"-label"),children:d})})]})}},63344:(e,t,n)=>{"use strict";n.d(t,{T:()=>m});var r=n(86739),l=n(50979),s=n(25963),a=n(2551),o=n(36609),i=n(13077),c=n(86954),u=n(95662);function d(){let e=(0,r._)(["\n  rounded-sm whitespace-break-spaces break-words\n  bg-gray-100 dark:bg-gray-200 outline outline-1 outline-[rgba(0,0,0,0.1)] dark:outline-gray-200\n"]);return d=function(){return e},e}let m=s.forwardRef((e,t)=>{var n;let{autoHeight:r,enterToSubmit:d,onSubmit:m,onChange:g,error:p,size:f,name:v,label:j,hint:y,id:b,className:w,contentRight:N,highlights:S=[],textareaSiblings:k,...T}=e,[C,E]=(0,s.useState)(null);(0,s.useImperativeHandle)(t,()=>C);let z="string"==typeof j?j:j.text,D="string"!=typeof j&&j.hidden;b=(0,s.useMemo)(()=>null!=b?b:"textarea-".concat(v)+"-"+Math.random(),[b,v]);let R="".concat(null!=(n=T.value)?n:""),F=(0,s.useMemo)(()=>{if(null==S||0===S.length)return null;S.sort((e,t)=>e.start-t.start);let e=[];for(let n=0;n<S.length;n++){var t;let r=S[n],s=S[n-1];e.push(R.slice(null!=(t=null==s?void 0:s.end)?t:0,r.start)),e.push((0,l.jsx)(h,{children:R.slice(r.start,r.end)},n)),n===S.length-1&&r.end<R.length&&e.push(R.slice(r.end,R.length))}return e},[R,S]),L=(0,o.xW)("flex-grow w-full relative z-10","min-w-0 rounded-md","border border-gray-200 text-foreground bg-transparent","placeholder-gray-500","focus:outline-none",c.kS[null!=f?f:"md"],c.gU[null!=f?f:"md"],p&&"border-red-500 focus:border-red-500",T.disabled&&"text-gray-400 placeholder-gray-400 border-gray-200 bg-gray-100 cursor-not-allowed",!p&&!T.disabled&&"hover:border-gray-400 focus:border-pink-400","overflow-x-hidden",w);return(0,l.jsx)("fieldset",{className:"flex flex-col flex-grow w-full",children:(0,l.jsxs)(u.T,{children:[(0,l.jsxs)(u.z,{align:"center",justify:"between",children:[(0,l.jsx)(c.JU,{htmlFor:b,className:D?"sr-only":"",children:z}),N&&N]}),(0,l.jsxs)("div",{className:"relative flex-grow flex",children:[(null==S?void 0:S.length)>0&&(0,l.jsx)("div",{"aria-hidden":!0,className:(0,o.xW)(L,"absolute z-0 inset-0","select-none pointer-events-none","border border-transparent text-transparent whitespace-break-spaces"),children:F}),(0,l.jsx)("textarea",{ref:e=>{E(e),null!=e&&x(e)},name:v,id:b,rows:1,onChange:e=>{r&&x(e.target),"function"==typeof g&&g(e)},onKeyDown:e=>{d&&"Enter"===e.key&&!e.shiftKey&&(e.stopPropagation(),e.preventDefault(),m&&m())},className:L,...T}),k&&k]}),null!=y&&"string"!=typeof p&&(0,l.jsx)("span",{className:"text-xs font-normal leading-[18px] text-gray-600 block mt-2",children:y}),"string"==typeof p&&(0,l.jsxs)("span",{className:"flex items-center text-red-600 leading-[18px] font-normal text-xs mt-2",children:[(0,l.jsx)(i.In,{icon:a.RIJ,size:"sm",className:"mr-1.5"})," ",p]})]})})}),x=e=>{e.style.height="1rem",e.style.height=e.scrollHeight+2+"px"},h=o.qy.span(d())},83119:(e,t,n)=>{"use strict";n.d(t,{g$:()=>v,u7:()=>j,vm:()=>p});var r=n(50979),l=n(13075),s=n(91729),a=n(25963),o=n(25646),i=n(95662),c=n(42419),u=n(31754),d=n(70375),m=n(13077),x=n(2551),h=n(36609);let g=()=>{let{routes:e}=(0,d.c)();return(0,r.jsxs)(i.T,{className:"max-w-sm",space:4,children:[(0,r.jsxs)(i.T,{space:2,children:[(0,r.jsx)(c.EY,{className:"font-semibold",children:"Error"}),(0,r.jsx)(c.ax,{children:"Your build failed as we could not find a start command to run your deployment with."})]}),(0,r.jsxs)(i.z,{align:"center",justify:"end",space:2,children:[(0,r.jsx)(u.vx,{variant:"outline",size:"sm",color:"gray",...e.docs({page:"reference/errors/no-start-command-could-be-found"}),children:"Read the docs"}),(0,r.jsx)(u.vx,{size:"sm",...e.projectServiceSettings({section:"deploy-start-command"}),children:"Add a start command"})]})]})},p={"No start command was found":(0,r.jsx)(g,{}),"No start command could be found":(0,r.jsx)(g,{}),"Nixpacks was unable to generate a build plan for this app.":(0,r.jsx)(()=>{let{routes:e}=(0,d.c)();return(0,r.jsxs)(i.T,{className:"max-w-sm",space:4,children:[(0,r.jsxs)(i.T,{space:2,children:[(0,r.jsx)(c.EY,{className:"font-semibold",children:"Error"}),(0,r.jsx)(c.ax,{children:"This usually happens when using a monorepo without the correct root directory set."})]}),(0,r.jsxs)(i.z,{align:"center",justify:"end",space:2,children:[(0,r.jsx)(u.vx,{variant:"outline",size:"sm",...e.docs({page:"reference/errors/nixpacks-was-unable-to-generate-a-build-plan"}),children:"Read the docs"}),(0,r.jsx)(u.vx,{size:"sm",...e.projectServiceSettings({section:"root-directory"}),children:"Configure root directory"})]})]})},{}),"ENOTFOUND redis.railway.internal":(0,r.jsx)(()=>{let{routes:e}=(0,d.c)();return(0,r.jsxs)(i.T,{className:"max-w-sm",space:4,children:[(0,r.jsxs)(i.T,{space:2,children:[(0,r.jsx)(c.EY,{className:"font-semibold",children:"Error"}),(0,r.jsxs)(c.ax,{children:["Your deployment crashed because it could not resolve the",(0,r.jsx)(c.R0,{children:"redis.railway.internal"})," hostname to connect to your Redis instance."]})]}),(0,r.jsx)(i.z,{align:"center",justify:"end",space:2,children:(0,r.jsx)(u.vx,{size:"sm",...e.docs({page:"reference/errors/enotfound-redis-railway-internal"}),children:"Read the docs"})})]})},{})},f=RegExp("(".concat(Object.keys(p).join("|"),")"),"g"),v=e=>{let{content:t,className:n}=e;return(0,r.jsxs)("span",{className:(0,h.xW)("inline-flex items-center gap-2 py-1 px-2 bg-red-200 rounded-lg cursor-help",n),children:[(0,r.jsx)(c.tj,{children:t}),(0,r.jsx)(m.In,{icon:x.R2D,size:"sm"})]})},j=e=>{let{content:t}=e,n=(0,a.useMemo)(()=>t.split(f).map((e,t)=>p[e]?(0,r.jsx)(o.j,{triggerContent:(0,r.jsx)(v,{content:e}),cardContent:p[e]},t):(0,r.jsx)(a.Fragment,{children:(0,l.Ay)(e)},t)),[t]);return(0,r.jsx)(s.E,{children:n})}},89633:(e,t,n)=>{"use strict";n.d(t,{E:()=>C,I:()=>z});var r=n(86739),l=n(50979),s=n(2551),a=n(25963),o=n(36609),i=n(94662),c=n(31754),u=n(19391),d=n(86954),m=n(8718),x=n(50253),h=n.n(x),g=n(75749),p=n(47654),f=n(13077),v=n(70375),j=n(80374),y=n(45479),b=n(30595),w=n(94702),N=n(81154),S=n(15857),k=n(36725);function T(){let e=(0,r._)(["text-xs font-medium text-gray-600 mb-2"]);return T=function(){return e},e}let C={start:null,end:null},E=[{label:"15 mins",value:"15 minutes ago"},{label:"1 hour",value:"1 hour ago"},{label:"3 hours",value:"3 hours ago"},{label:"1 day",value:"1 day ago"},{label:"3 days",value:"3 days ago"},{label:"1 week",value:"1 week ago"},{label:"3 weeks",value:"3 weeks ago"},{label:"1 month",value:"1 month ago"},{label:"2 months",value:"2 month ago"},{label:"3 months",value:"3 months ago"}],z=e=>{var t;let{contextStart:n,contextEnd:r,activeDateRange:i,dateRange:c,setDateRange:x,setActiveDateRange:p,retentionDays:f}=e,[v,j]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[N,S]=(0,a.useState)(null);(0,a.useEffect)(()=>{var e,t,n,r;((null==(e=i.start)?void 0:e.getTime())!==(null==(t=c.start)?void 0:t.getTime())||(null==(n=i.end)?void 0:n.getTime())!==(null==(r=c.end)?void 0:r.getTime()))&&S(null)},[i]);let T="";null!=i.start&&null!=i.end?T="".concat((0,k.k)(i.start)," - ").concat((0,k.k)(i.end)):null!=i.start&&null==i.end?T="".concat((0,w.xg)(i.start)," ago"):((null==(t=i.start)?void 0:t.getTime())===0||null==i.start)&&null==i.end&&(T="All time");let C=(0,a.useMemo)(()=>n?r?(0,w.Kg)(n)+" - "+(0,w.Kg)(r):(0,w.Kg)(n):null!=N?N:T,[i,N,n]),[z,I]=(0,a.useState)(null),[P,U]=(0,a.useState)(null);((e,t)=>{(0,a.useEffect)(()=>{function n(n){e.some(e=>null==e?void 0:e.contains(n.target))||t()}return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},e)})([P,z],()=>{j(!1)}),(0,a.useEffect)(()=>{if(null!=z)return(0,m.Ay)(z,{Escape:()=>{j(!1)},Enter:e=>{e.preventDefault(),e.stopPropagation(),j(!1);let t=F(null!=N?N:"");null!=t&&(x(t),p(t))}})},[z,x,p,j,N]);let{positionStyles:W}=(0,a.useMemo)(()=>{let e=null==z?void 0:z.getBoundingClientRect();if(null==e)return{};let t=Math.min(600,window.innerHeight-e.bottom-30);return{positionStyles:{top:"".concat(e.bottom,"px"),left:"".concat(e.left,"px"),width:"".concat(e.width,"px"),maxHeight:"".concat(t,"px")}}},[z,v]),M=e=>{null==z||z.focus(),b(!1),j(!1),S(e);let t=F(e);null!=t&&(x(t),p(t))},_=(0,a.useMemo)(()=>L(f,N?F(N):i),[f,N,i]),{validTimeOptions:A}=(0,a.useMemo)(()=>{let e=[],t=[];for(let n of E)L(f,F(n.value))?t.push(n):e.push(n);return{validTimeOptions:e,upgradeTimeOptions:t}},[f]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.pd,{ref:I,error:!n&&y,warning:!n&&_,autoComplete:"off",icon:n?s.B1E:s.zD7,size:"sm",className:"min-w-[300px] tabular-nums",value:C,label:{text:"Date range",hidden:!0},onChange:e=>(e=>{b(!1),S(e);let t=F(e);if(null==t)return void b(!0);x(t)})(e.target.value),onMouseDown:()=>{j(e=>!e)}}),v&&(0,l.jsx)(u.b,{"aria-hidden":!0,children:(0,l.jsx)("div",{ref:U,style:W,className:(0,o.xW)("fixed z-20 mt-0.5","bg-background shadow-md dark:bg-gray-100 rounded border border-gray-200 overflow-hidden"),children:(0,l.jsxs)("div",{className:"p-4",children:[y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-xs text-red-600",children:"Range input is invalid"}),(0,l.jsx)(g.c,{className:"!my-5 dark:border-gray-200"})]}),(0,l.jsx)(R,{children:"Relative Time"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 w-full",children:A.map(e=>(0,l.jsx)(D,{label:e.label,value:e.value,onChange:M},e.label))}),(0,l.jsx)(g.c,{className:"!my-5 dark:border-gray-200"}),(0,l.jsx)(R,{children:"Time Range"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 w-full tabular-nums",children:["".concat(h()().subtract(2,"day").format("MMM DD")," - ").concat(h()().subtract(1,"day").format("MMM DD")),"2h ago - 1h ago","yesterday 12am - today 12am"].map(e=>(0,l.jsx)(D,{label:e,value:e,onChange:M},e))}),(0,l.jsx)(O,{retentionDays:f,isPastRetention:_})]})})})]})},D=e=>{let{disabled:t,label:n,value:r,onChange:s,color:a="gray"}=e;return(0,l.jsx)(c.$n,{disabled:t,variant:"outline",size:"xs",color:a,className:"font-mono dark:hover:border-gray-300",onClick:()=>null==s?void 0:s(r),children:n})},R=o.qy.h2(T()),F=e=>{if(""===e||e.match(/all time/i))return{start:new Date(0),end:null};let t=e=>{var t,n,r;let l=e.split("-"),s=null==(t=l[0])?void 0:t.trim(),a=null!=(r=null==(n=l[1])?void 0:n.trim())?r:null,o=i._U(null!=s?s:""),c=!a||/live/i.test(a)?null:i._U(null!=a?a:"");return s&&!o||a&&!c?null:{start:o,end:c}},n=t(e);return n?n:t(e.replace(/(\d+)\s*(m)(?!o)/gi,"$1 minutes ago").replace(/(\d+)\s*h/gi,"$1 hours ago").replace(/(\d+)\s*d/gi,"$1 days ago").replace(/(\d+)\s*w/gi,"$1 weeks ago").replace(/(\d+)\s*mo/gi,"$1 months ago").replace(/(\d+)\s*y/gi,"$1 years ago"))},L=(e,t)=>null!=e&&(null==t?void 0:t.start)!=null&&t.start<h()().subtract((e+.5)*24,"hour").toDate(),O=e=>{let{retentionDays:t,isPastRetention:n}=e,{routes:r}=(0,v.c)(),a=(0,N.md)(S.T6),[i,u]=(0,b.A)("@railway/logs/dismissed-retention-banner",{defaultValue:!1});return i||null==t?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g.c,{className:"!my-5 dark:border-gray-200"}),(0,l.jsxs)(p.N,{href:(null==a?void 0:a.subscriptionType)===y.dh$.Pro?r.demo({}).url:r.workspacePlan({}).url,className:"group flex items-center text-xs w-full text-gray-600 hover:text-pink-600 py-4 -my-4",children:[(0,l.jsx)("div",{className:(0,o.xW)(n&&"text-yellow-600"),children:(null==a?void 0:a.subscriptionType)===y.dh$.Pro?"Need more than ".concat((0,j.k)("day",t),"?"):"Look back more than ".concat((0,j.k)("day",t))}),(0,l.jsx)(c.$n,{as:"div",size:"2xs",variant:"outline",className:"ml-auto",color:n?"yellow":"pink",children:(null==a?void 0:a.subscriptionType)===y.dh$.Pro?"Reach Out":"PRO"}),(0,l.jsx)("button",{className:"transition-all w-0 group-hover:w-6 overflow-hidden",onClick:e=>{e.preventDefault(),u(!0)},children:(0,l.jsx)(f.In,{icon:s.X,size:"sm",title:"Dismiss",className:"text-gray-400 hover:text-gray-600 ml-auto"})})]})]})}},90966:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[projectId]/logs",function(){return n(20889)}])},91729:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});var r=n(86739);function l(){let e=(0,r._)(["ansi-color-wrapper"]);return l=function(){return e},e}let s=n(36609).qy.span(l())},92727:(e,t,n)=>{"use strict";n.d(t,{C:()=>g});var r=n(50979),l=n(25963),s=n(36609),a=n(2551),o=n(13077);function i(e,t){switch(t){case"string":return'"'.concat(e,'"');case"object":return"{}";case"array":return"[]";default:return String(e)}}function c(e){let{depth:t,name:n,value:u,jsonPath:d,wrapText:m=!1,onAttrClick:x}=e,[h,g]=(0,l.useState)(!1),p=null!=d?d:String(n),f=null===u?"null":Array.isArray(u)?"array":"object"==typeof u?"object":"string"==typeof u?"string":"number"==typeof u?"number":"other",v="object"===f||"array"===f,j=()=>{x&&!v&&x(String(null!=d?d:n),u)};return(0,r.jsxs)("div",{className:(0,s.xW)(0===t&&"-ml-4","font-mono text-xs text-left select-text"),children:[(0,r.jsxs)("button",{className:"grid grid-cols-[max-content,minmax(0,auto)] items-start group text-left",onClick:e=>{e.stopPropagation(),g(e=>!e)},children:[v?(0,r.jsxs)("div",{className:"relative flex items-center pl-4",children:[(0,r.jsx)(o.In,{size:"xs",icon:a.c_$,className:(0,s.xW)("left-0 absolute transition-transform text-gray-500 group-hover:text-gray-700",h&&"rotate-90")}),(0,r.jsxs)("span",{className:"text-neutral-secondary group-hover:text-neutral mr-1.5",children:[n,":"]})]}):(0,r.jsxs)("div",{className:"text-neutral-secondary pl-4 mr-1.5",children:[n,":"]}),(()=>{if(v){let e=h?i(u,f):"object"===f?"{⋯}":"[⋯]";return(0,r.jsx)("span",{className:"text-gray-500",children:e})}let e=i(u,f);return(0,r.jsx)("button",{className:(0,s.xW)("text-left select-text",m?"text-wrap break-words":"truncate",function(e){switch(e){case"number":return"text-pink-500 dark:text-pink-600";case"string":return"text-blue-500 dark:text-blue-600";case"null":return"text-yellow-600 dark:text-yellow-700";default:return""}}(f),x&&"cursor-pointer hover:underline"),onClick:e=>{let t=window.getSelection();if(t&&t.toString().length>0){let n=e.currentTarget,r=n.contains(t.anchorNode),l=n.contains(t.focusNode);if(r||l)return}j&&j()},children:e})})()]}),(()=>{if(!h||!v)return null;let e=[];return"object"===f?e=Object.keys(u).sort().map(e=>(0,r.jsx)(c,{depth:t+1,value:u[e],name:e,jsonPath:function(e,t){let n=/^[a-z0-9_]+$/i.test(t)?t:"`".concat(t,"`");return"".concat(e,".").concat(n)}(p,e),wrapText:m,onAttrClick:x},e)):"array"===f&&(e=u.map((e,n)=>{var l,s;return(0,r.jsx)(c,{depth:t+1,value:e,name:n,jsonPath:(l=p,s=n,"".concat(l,"[").concat(s,"]")),wrapText:m,onAttrClick:x},n)})),(0,r.jsx)("div",{className:"ml-2 max-w-full",children:e})})()]})}var u=n(21500),d=n(76999),m=n(23466),x=n(73751),h=n(67366);function g(e){let{defaultExpanded:t=!1,toJSON:n}=e;return(0,l.forwardRef)(function(e,a){let{item:o,className:i,children:g,onClick:p,style:f,...v}=e,[j,y]=(0,l.useState)(t),b=(0,u.R7)(),w=(e,t)=>{if(!b.enabled)return;let n=function(e,t){if("message"===e)return new d.NJ(JSON.stringify(t.split("\n")[0]));if(e.startsWith("tags.")){var n;let r=e.replace("tags.","");return new d.nW(null!=(n=x.r3[r])?n:r,JSON.stringify(t))}return e.startsWith("attributes.")?new d.nW(e.replace("attributes.",""),JSON.stringify(t)):null}(e,t);n&&b.addExpression(n)},N=j?Object.entries(n(o)):[],S=(0,m.FW)();return(0,r.jsxs)(h.u,{...v,item:o,onClick:e=>{!function(e,t){let n=e;for(;n&&n!==t;){if(n instanceof HTMLButtonElement||n instanceof HTMLAnchorElement||n.hasAttribute("data-expanded-group"))return!0;n=n.parentElement}return!1}(e.target,e.currentTarget)&&(y(e=>!e),null==p||p(e))},className:(0,s.xW)("hover:bg-gray-50 cursor-pointer",i),ref:a,style:f,children:[g,j&&(0,r.jsx)("div",{style:f,"data-expanded-group":!0,children:(0,r.jsx)("div",{className:"col-span-full pl-5 pb-2 select-none cursor-auto border-l border-l-neutral ml-[13px]",children:N.map(e=>{let[t,n]=e;return(0,r.jsx)(c,{depth:0,value:n,name:t,wrapText:S.wrapText,onAttrClick:w},t)})})})]})})}}},e=>{e.O(0,[1209,6177,4673,8593,4823,5449,3587,8991,1758,1165,4662,701,636,6593,8792],()=>e(e.s=90966)),_N_E=e.O()}]);